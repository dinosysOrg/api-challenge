<div style="padding: 10px">
				
						
		<h3 align="center"><code>All groups</code></h3>
		<div class="table-responsive">
			<table id="table_group" class="table table-striped table-bordered">
				<thead style="color: green">
					<tr>
						<th >Name</th>
						<th >Tournament</th>
						<th >Created at</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					<% @groups.each do |group| %>
						<tr>
							<td>
								<span group_id="<%= group.id %>" data-name="name" class="groups" data-type="text" data-pk="1" data-title="Enter name"><%= group.name %></span>
							</td>
							<td>
								<span group_id="<%= group.id %>" data-name="tournament_id" class="tournament_group" data-type="select" data-pk="2" data-title="Enter name"><%= group.tournament.name %></span>
							</td>
							<td><%= group.created_at.strftime("%d-%m-%Y") %></td>
							<td id="<%= group.id %>" class="delete_group">Delete</td>
						</tr>
					<% end %>
				</tbody>
			</table>
		</div>
		<h4 align="center"><code><%= link_to "New group", new_group_path %></code></h4>
</div>

<script>
	$(".delete_group").click(function() {
    swal({
        title: 'Are you sure?',
        text: "You won't be able to revert this!",
        type: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
        if (result) {
            $.ajax({
                type: "POST",
                url: "/destroy_group",
                data: {
                    id: this.id
                },
                success: (response) => {
                    if (response.status == "success") {
                        swal(
                            'Wohooo!',
                            response.message,
                            'success'
                        )

                        $(this).parent().fadeOut();
                    } else {
                        swal(
                            'Oops...',
                            response.message,
                            'error'
                        )
                    }
                }
            });
                       
        }
    })
});


	$(".groups").editable({
			url: "/update_group",
			type: 'post',
			params: function(params){
                var group_id = $(this).attr("group_id");
                params.id = group_id;
                return params;                
			},
	    success: (response) => {
	        if (response.status == "success") {
	            swal(
	                'Wohooo!',
	                response.message,
	                'success'
	            )

	        } else {
	            swal(
	                'Oops...',
	                response.message,
	                'error'
	            )
	        }
	    }
		})

	$(".tournament_group").editable({
			url: "/update_group",
			type: 'post',
			source: [
              <% Tournament.all.each do |tour| %>
              	{value: "<%= tour.id %>", text: "<%= tour.name %>"},
              <% end %>
           ],
			params: function(params){
                var group_id = $(this).attr("group_id");
                params.id = group_id;
                return params;                
			},
	    success: (response) => {
	        if (response.status == "success") {
	            swal(
	                'Wohooo!',
	                response.message,
	                'success'
	            )

	        } else {
	            swal(
	                'Oops...',
	                response.message,
	                'error'
	            )
	        }
	    }
		})
</script>

